<!DOCTYPE html>
<html ng-app="app">
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width">
        <script type="text/javascript" src="../../lib/jquery/js/jquery.js"></script>
        <script type='text/javascript' src='../../lib/angularjs/js/angular.js'></script>
        <script type='text/javascript' >
            var app = angular.module('app', []);
            app.controller("PruebaController", ['$scope', function($scope) {


                    $scope.datos = [
                        {
                            idProvincia: 2,
                            nombre: "Valencia",
                            key: {
                                idProvincia: 2
                            }
                        },
                        {
                            idProvincia: 3,
                            nombre: "Castellon",
                            key: {
                                idProvincia: 3
                            }
                        },
                        {
                            idProvincia: 1,
                            nombre: "Alicante",
                            key: {
                                idProvincia: 1
                            }
                        }
                    ];

                    $scope.provincia = {
                        idProvincia: 2,
                        nombre: "Valencia",
                        key: {
                            idProvincia: 2
                        }
                    }

                    $scope.b = true;
                    $scope.pk = "idProvincia";
                    $scope.pk2 = "id";
                }]);


            app.directive('ix3Options', ['$compile', function($compile) {
                    return {
                        restrict: 'A',
                        priority: 99999,
                        compile: function($scope, element, attributes) {
                            element.ngOptions = element.ix3Options;
                        }
                    };
                }]);


        </script>
    </head>
    <body ng-controller="PruebaController">
        <select ng-model="provincia" ix3-options="provincia as provincia.nombre for provincia in datos track by (b==true?provincia.key.idProvincia:provincia.key.id)" >
            <option value="">-- Elige Provincia --</option>
        </select>
        {{provincia|json}}
        <br>
        <br>
    </body>
</html>
